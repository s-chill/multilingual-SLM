In control theory , a state observer or state estimator is a system that provides an estimate of the internal state of a given real system, from measurements of the input and output of the real system.  It is typically computer-implemented, and provides the basis of many practical applications.

Knowing the system state is necessary to solve many control theory problems; for example, stabilizing a system using state feedback . In most practical cases, the physical state of the system cannot be determined by direct observation. Instead, indirect effects of the internal state are observed by way of the system outputs.  A simple example is that of vehicles in a tunnel: the rates and velocities at which vehicles enter and leave the tunnel can be observed directly, but the exact state inside the tunnel can only be estimated.  If a system is observable , it is possible to fully reconstruct the system state from its output measurements using the state observer.

Linear, delayed, sliding mode, high gain, Tau, homogeneity-based, extended and cubic observers are among several observer structures used for state estimation of linear and nonlinear systems. A linear observer structure is described in the following sections.

The state of a linear, time-invariant discrete-time system is assumed to satisfy

where, at time k {\displaystyle k} , x ( k ) {\displaystyle x(k)} is the plant's state; u ( k ) {\displaystyle u(k)} is its inputs; and y ( k ) {\displaystyle y(k)} is its outputs.  These equations simply say that the plant's current outputs and its future state are both determined solely by its current states and the current inputs.  (Although these equations are expressed in terms of discrete time steps, very similar equations hold for continuous systems).  If this system is observable then the output of the plant, y ( k ) {\displaystyle y(k)} , can be used to steer the state of the state observer.

The observer model of the physical system is then typically derived from the above equations.  Additional terms may be included in order to ensure that, on receiving successive measured values of the plant's inputs and outputs, the model's state converges to that of the plant.  In particular, the output of the observer may be subtracted from the output of the plant and then multiplied by a matrix L {\displaystyle L} ; this is then added to the equations for the state of the observer to produce a so-called Luenberger observer , defined by the equations below.  Note that the variables of a state observer are commonly denoted by a "hat": x ^ ( k ) {\displaystyle {\hat {x}}(k)} and y ^ ( k ) {\displaystyle {\hat {y}}(k)} to distinguish them from the variables of the equations satisfied by the physical system.

The observer is called asymptotically stable if the observer error e ( k ) = x ^ ( k ) − x ( k ) {\displaystyle e(k)={\hat {x}}(k)-x(k)} converges to zero when k → ∞ {\displaystyle k\to \infty } . For a Luenberger observer, the observer error satisfies e ( k + 1 ) = ( A − L C ) e ( k ) {\displaystyle e(k+1)=(A-LC)e(k)} .  The Luenberger observer for this discrete-time system is therefore asymptotically stable when the matrix A − L C {\displaystyle A-LC} has all the eigenvalues inside the unit circle.

For control purposes the output of the observer system is fed back to the input of both the observer and the plant through the gains matrix K {\displaystyle K} .

The observer equations then become:

or, more simply,

Due to the separation principle we know that we can choose K {\displaystyle K} and L {\displaystyle L} independently without harm to the overall stability of the systems.  As a rule of thumb, the poles of the observer A − L C {\displaystyle A-LC} are usually chosen to converge 10 times faster than the poles of the system A − B K {\displaystyle A-BK} .

The previous example was for an observer implemented in a discrete-time LTI system. However, the process is similar for the continuous-time case; the observer gains L {\displaystyle L} are chosen to make the continuous-time error dynamics converge to zero asymptotically (i.e., when A − L C {\displaystyle A-LC} is a Hurwitz matrix ).

For a continuous-time linear system

where x ∈ R n , u ∈ R m , y ∈ R r {\displaystyle x\in \mathbb {R} ^{n},u\in \mathbb {R} ^{m},y\in \mathbb {R} ^{r}} , the observer looks similar to discrete-time case described above:

The observer error e = x − x ^ {\displaystyle e=x-{\hat {x}}} satisfies the equation

The eigenvalues of the matrix A − L C {\displaystyle A-LC} can be chosen arbitrarily by appropriate choice of the observer gain L {\displaystyle L} when the pair [ A , C ] {\displaystyle [A,C]} is observable, i.e. observability condition holds. In particular, it can be made Hurwitz, so the observer error e ( t ) → 0 {\displaystyle e(t)\to 0} when t → ∞ {\displaystyle t\to \infty } .

When the observer gain L {\displaystyle L} is high, the linear Luenberger observer converges to the system states very quickly. However, high observer gain leads to a peaking phenomenon in which initial estimator error can be prohibitively large (i.e., impractical or unsafe to use). As a consequence, nonlinear high-gain observer methods are available that converge quickly without the peaking phenomenon. For example, sliding mode control can be used to design an observer that brings one estimated state's error to zero in finite time even in the presence of measurement error; the other states have error that behaves similarly to the error in a Luenberger observer after peaking has subsided. Sliding mode observers also have attractive noise resilience properties that are similar to a Kalman filter . Another approach is to apply multi observer, that significantly improves transients and reduces observer overshoot. Multi-observer can be adapted to every system where high-gain observer is applicable.

High gain, sliding mode and extended observers are the most common observers for nonlinear systems. 
To illustrate the application of sliding mode observers for nonlinear systems, first consider the no-input non-linear system:

where x ∈ R n {\displaystyle x\in \mathbb {R} ^{n}} . Also assume that there is a measurable output y ∈ R {\displaystyle y\in \mathbb {R} } given by

There are several non-approximate approaches for designing an observer. The two observers given below also apply to the case when the system has an input. That is,

One suggestion by Krener and Isidori and Krener and Respondek can be applied in a situation when there exists a linearizing transformation (i.e., a diffeomorphism , like the one used in feedback linearization ) z = Φ ( x ) {\displaystyle z=\Phi (x)} such that in new variables the system equations read

The Luenberger observer is then designed as

The observer error for the transformed variable e = z ^ − z {\displaystyle e={\hat {z}}-z} satisfies the same equation as in classical linear case.

As shown by Gauthier, Hammouri, and Othman and Hammouri and Kinnaert, if there exists transformation z = Φ ( x ) {\displaystyle z=\Phi (x)} such that the system can be transformed into the form

then the observer is designed as

where L ( t ) {\displaystyle L(t)} is a time-varying observer gain.

Ciccarella, Dalla Mora, and Germani obtained more advanced and general results, removing the need for a nonlinear transform and proving global asymptotic convergence of the estimated state to the true state using only simple assumptions on regularity.

As discussed for the linear case above, the peaking phenomenon present in Luenberger observers justifies the use of switched observers. A switched observer encompasses a relay or binary switch that acts upon detecting minute changes in the measured output. Some common types of switched observers include the sliding mode observer, nonlinear extended state observer, fixed time observer, switched high gain observer and uniting observer. The sliding mode observer uses non-linear high-gain feedback to drive estimated states to a hypersurface where there is no difference between the estimated output and the measured output. The non-linear gain used in the observer is typically implemented with a scaled switching function, like the signum (i.e., sgn) of the estimated – measured output error. Hence, due to this high-gain feedback, the vector field of the observer has a crease in it so that observer trajectories slide along a curve where the estimated output matches the measured output exactly. So, if the system is observable from its output, the observer states will all be driven to the actual system states. Additionally, by using the sign of the error to drive the sliding mode observer, the observer trajectories become insensitive to many forms of noise. Hence, some sliding mode observers have attractive properties similar to the Kalman filter but with simpler implementation.

As suggested by Drakunov, a sliding mode observer can also be designed for a class of non-linear systems. Such an observer can be written in terms of original variable estimate x ^ {\displaystyle {\hat {x}}} and has the form

where:

The idea can be briefly explained as follows. According to the theory of sliding modes, in order to describe the system behavior, once sliding mode starts, the function sgn ⁡ ( v i ( t ) − h i ( x ^ ( t ) ) ) {\displaystyle \operatorname {sgn}(v_{i}(t)\!-\!h_{i}({\hat {x}}(t)))} should be replaced by equivalent values (see equivalent control in the theory of sliding modes ). In practice, it switches (chatters) with high frequency with slow component being equal to the equivalent value. Applying appropriate lowpass filter to get rid of the high frequency component on can obtain the value of the equivalent control, which contains more information about the state of the estimated system. The observer described above uses this method several times to obtain the state of the nonlinear system ideally in finite time.

The modified observation error can be written in the transformed states e = H ( x ) − H ( x ^ ) {\displaystyle e=H(x)-H({\hat {x}})} . In particular,

and so

So:

So, for sufficiently large m i {\displaystyle m_{i}} gains, all observer estimated states reach the actual states in finite time. In fact, increasing m i {\displaystyle m_{i}} allows for convergence in any desired finite time so long as each | h i ( x ( 0 ) ) | {\displaystyle |h_{i}(x(0))|} function can be bounded with certainty. Hence, the requirement that the map H : R n → R n {\displaystyle H:\mathbb {R} ^{n}\to \mathbb {R} ^{n}} is a diffeomorphism (i.e., that its Jacobian linearization is invertible) asserts that convergence of the estimated output implies convergence of the estimated state. That is, the requirement is an observability condition.

In the case of the sliding mode observer for the system with the input, additional conditions are needed for the observation error to be independent of the input. For example, that

does not depend on time. The observer is then

Multi-observer extends the high-gain observer structure from single to multi observer, with many models working simultaneously. This has two layers: the first consists of multiple high-gain observers with different estimation states, and the second determines the importance weights of the first layer observers. The algorithm is simple to implement and does not contain any risky operations like differentiation. The idea of multiple models was previously applied to obtain information in adaptive control.

Assuming that the number of high-gain observers equals n + 1 {\displaystyle n+1} ,

where k = 1 , … , n + 1 {\displaystyle k=1,\dots ,n+1} is the observer index. The first layer observers consists of the same gain L {\displaystyle L} but they differ with the initial state x k ( 0 ) {\displaystyle x_{k}(0)} . In the second layer all x k ( t ) {\displaystyle x_{k}(t)} from k = 1... n + 1 {\displaystyle k=1...n+1} observers are combined into one to obtain single state vector estimation

where α k ∈ R {\displaystyle \alpha _{k}\in \mathbb {R} } are weight factors. These factors are changed to provide the estimation in the second layer and to improve the observation process.

Let assume that

and

where ξ k ∈ R n × 1 {\displaystyle \xi _{k}\in \mathbb {R} ^{n\times 1}} is some vector that depends on k t h {\displaystyle kth} observer error e k ( t ) {\displaystyle e_{k}(t)} .

Some transformation yields to linear regression problem

This formula gives possibility to estimate α k ( t ) {\displaystyle \alpha _{k}(t)} . To construct manifold we need mapping m : R n → R n {\displaystyle m:\mathbb {R} ^{n}\to \mathbb {R} ^{n}} between ξ k ( t ) = m ( e k ( t ) ) {\displaystyle \xi _{k}(t)=m(e_{k}(t))} and ensurance that ξ k ( t ) {\displaystyle \xi _{k}(t)} is calculable relying on measurable signals. 
First thing is to eliminate parking phenomenon for α k ( t ) {\displaystyle \alpha _{k}(t)} from observer error

Calculate n {\displaystyle n} times derivative on η k ( t ) = y ^ k ( t ) − y ( t ) {\displaystyle \eta _{k}(t)={\hat {y}}_{k}(t)-y(t)} to find mapping m lead to ξ k ( t ) {\displaystyle \xi _{k}(t)} defined as

where t d > 0 {\displaystyle t_{d}>0} is some time constant. Note that ξ k ( t ) {\displaystyle \xi _{k}(t)} relays on both η k ( t ) {\displaystyle \eta _{k}(t)} and its integrals hence it is easily available in the control system. Further α k ( t ) {\displaystyle \alpha _{k}(t)} is specified by estimation law; and thus it proves that manifold is measurable. In the second layer α ^ k ( t ) {\displaystyle {\hat {\alpha }}_{k}(t)} for k = 1 … n + 1 {\displaystyle k=1\dots n+1} is introduced as estimates of α k ( t ) {\displaystyle \alpha _{k}(t)} coefficients. The mapping error is specified as

where e ξ ( t ) ∈ R n × 1 , α ^ k ( t ) ∈ R {\displaystyle e_{\xi }(t)\in \mathbb {R} ^{n\times 1},{\hat {\alpha }}_{k}(t)\in \mathbb {R} } . If coefficients α ^ ( t ) {\displaystyle {\hat {\alpha }}(t)} are equal to α k ( t ) {\displaystyle \alpha _{k}(t)} , then mapping error e ξ ( t ) = 0 {\displaystyle e_{\xi }(t)=0} Now it is possible to calculate x ^ {\displaystyle {\hat {x}}} from above equation and hence the peaking phenomenon is reduced thanks to properties of manifold. The created mapping gives a lot of flexibility in the estimation process. Even it is possible to estimate the value of x ( t ) {\displaystyle x(t)} in the second layer and to calculate the state x {\displaystyle x} .

Bounding or interval observers constitute a class of observers that provide two estimations
of the state simultaneously: one of the estimations provides an upper bound on the real value of the state,
whereas the second one provides a lower bound. The real value of the state is then known to be always within these two estimations.

These bounds are very important in practical applications, as they make possible to know at each time the precision of the estimation.

Mathematically, two Luenberger observers can be used, if L {\displaystyle L} is properly selected, using, for example, positive systems properties: one for the upper bound x ^ U ( k ) {\displaystyle {\hat {x}}_{U}(k)} (that ensures that e ( k ) = x ^ U ( k ) − x ( k ) {\displaystyle e(k)={\hat {x}}_{U}(k)-x(k)} converges to zero from above when k → ∞ {\displaystyle k\to \infty } , in the absence of noise and uncertainty ), and a lower bound x ^ L ( k ) {\displaystyle {\hat {x}}_{L}(k)} (that ensures that e ( k ) = x ^ L ( k ) − x ( k ) {\displaystyle e(k)={\hat {x}}_{L}(k)-x(k)} converges to zero from below). That is, always x ^ U ( k ) ≥ x ( k ) ≥ x ^ L ( k ) {\displaystyle {\hat {x}}_{U}(k)\geq x(k)\geq {\hat {x}}_{L}(k)}